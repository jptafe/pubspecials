<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pub Specials</title>
    <link rel="stylesheet" href="app.css">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" 
      href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" 
      integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" 
      crossorigin="anonymous">
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"></script>
    <script
      src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
      integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
      crossorigin="anonymous"></script>
    <!-- Need to get jQuery UI css styled -->
    <script type="text/javascript" 
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCvC1ToQXBS5fGNEY1w0pPOkZb7NUkImVc&libraries=places">
    </script>
    <script src="app.js" defer></script>
</head>
<body>
    <nav>
        <header>
            <div>Pub Specials</div>
        </header>
        <footer>
            <button id="suburbgps" name="suburbgps">
                Near <i class="fas fa-map-marker-alt"></i>
            </button>
            <input type="text" name="suburbpost" id="suburbpost" list="suburbpostlist" onfocus="this.select()" placeholder="Search Suburb or Postcode" 
                pattern="[A-Za-z0-9 ,-.]{3,}"> 
            <datalist id="suburbpostlist">
            </datalist>
            <input type="hidden" name="suburbpost_post" id="suburbpost_post" size="4" maxwidth="4" disabled>
            <input type="hidden" name="suburbpost_state" id="suburbpost_state" size="3" maxlength="3" disabled>
            <input type="hidden" name="suburbpost_lat" id="suburbpost_lat" size="7" maxlengeth="8" disabled>
            <input type="hidden" name="suburbpost_long" id="suburbpost_long" size="7" maxlength="8" disabled>
            <select name="subrubpost_radius" id="suburbpost_radius">
                <option value="1">1km</option>
                <option value="5">5km</option>
                <option value="10">10km</option>
                <option value="50">50km</option>
                <option value="100">100km</option>
            </select>
            <button name="suburbpost_recent" id="suburbpost_recent">
                Recent <i class="fas fa-clock"></i>
            </button>
            <button name="suburbpost_viewed" id="suburbpost_viewed">
                Viewed <i class="fas fa-eye"></i>
            </button>
            <button name="suburbpost_popular" id="suburbpost_popular">
                Rated <i class="fas fa-star"></i>
            </button>   
            &nbsp;
            <button name="addpub_button" id="addpub_button" disabled>
                Add Pub <i class="fas fa-beer"></i>
            </button>
            &nbsp;
            <span id="FBButton">
                <fb:login-button 
                    scope="public_profile,email"
                    onlogin="checkLoginState();">
                </fb:login-button>
            </span>
        </footer>
    </nav>
    <article id="contentstuff">
        <section>
            <p id="publist">Lorem ipsum</p>
        </section>
    <footer>
        <!-- About, Bug Reporting, contact form -->
    </footer>
    <aside>
        <fieldset>
            <legend>Registration Form</legend>
            <form action="#" method="POST" novalidate>
                <label>E-mail</label>
                <input type="text" name="email" placeholder="Email Address" autocomplete="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required>
                <label>Password</label>
                <input type="password" name="password" id="password1" placeholder="Password" autocomplete="new-password" pattern=".{8,}" required>
                <label>Password Again</label>
                <input type="password" name="passwordagain" id="password2" placeholder="Password Again" autocomplete="new-password" pattern=".{8,}" required>
                <input type="submit" name="register" value="register">
            </form>
        </fieldset> 
        <fieldset>
            <legend>Login Form</legend>
            <form action="#" method="POST" novalidate>
                <label>E-mail</label>
                <input type="text" name="email" placeholder="Email Address" autocomplete="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required>
                <label>Password</label>
                <input type="password" name="password" placeholder="Password" autocomplete="current-password" pattern=".{8,}" required>
                <input type="submit" name="login" value="login">
            </form>
        </fieldset> 
        <fieldset>
            <legend>Add Pub Form</legend>
            <form action="#" method="POST" novalidate>
                <label>Pub Name</label>
                <input type="text" name="pubname" placeholder="Pub Name" required>
                <label>Pub Address</label>
                <input type="text" name="pubaddress" placeholder="Pub Address" id="pubaddress" required>
                <label>Pub Image</label>
                <input type="file" name="publogo" accept="image/png, image/jpeg">
                <input type="hidden" name="postcode">
                <label>Number & Street</label>
                <input type="text" name="pubnostreet" id="pubnostreet"size="14" maxlength="64" disabled>
                <label>Suburb</label>
                <input type="text" name="pubsuburb" id="pubsuburb" size="14" maxlength="32" disabled>
                <label>State</label>
                <input type="text" name="pubstate" id="pubstate" size="3" maxlength="3" disabled>   
                <label>Postcode</label>
                <input type="number" name="pubpcode" id="pubpcode"size="4" maxlength="4" disabled>   
                <label>Latitude</label>
                <input type="number" name="publat" id="publat" size="7" maxlength="8" disabled>
                <label>Longitude</label>
                <input type="number" name="publong" id="publong" size="7" maxlength="8" disabled>
                <!-- <input type="button" name="find_pub_gps" id="pubgps" value="Get Address from GPS"> -->
                <button onclick="return false" name="find_pub_gps" id="pubgps">
                    Get Address <i class="fas fa-globe"></i>
                </button>
                <button name="addpub_button" id="addpub_button" disabled>
                    Add Pub <i class="fas fa-beer"></i>
                </button>
            </form>
        </fieldset>         
        <fieldset>
            <legend>Add Special Form</legend>
            <form action="#" method="POST" novalidate>
                <label>Special Description</label>
                <input type="text" name="specialdesc" placeholder="Special Description" required>
                <label>Day of Week</label>
                <select name="specialdow" pattern="[A-Za-z]{6,9}" required>
                    <option value="choose" selected>Choose...</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Saturday">Saturday</option>
                    <option value="Sunday">Sunday</option>
                    <option value="Weekdays">Weekdays</option>
                    <option value="Weekends">Weekends</option>
                    <option value="Alldays">All Days</option>
                </select>
                <label>Start Time</label>
                <select name="specialstarttime" pattern="[0-9]{2}+:[0-9]{2}" required>
                    <option value="choose" selected>Choose...</option>
                    <option value="10:00">10 am</option>
                    <option value="11:00">11 am</option>
                    <option value="12:00">12 pm</option>
                    <option value="13:00">1 pm</option>
                    <option value="14:00">2 pm</option>
                    <option value="15:00">3 pm</option>
                    <option value="16:00">4 pm</option>
                    <option value="17:00">5 pm</option>
                    <option value="18:00">6 pm</option>
                    <option value="19:00">7 pm</option>
                    <option value="20:00">8 pm</option>
                    <option value="21:00">9 pm</option>
                    <option value="22:00">10 pm</option>
                </select>
                <label>Effective</label>
                <input type="text" name="specialbegins" id="specialbegins" placeholder="Special Begins" required>
                <label>Expires</label>
                <input type="text" name="specialexpires" id="specialexpires" value="2030-01-01" placeholder="Special Expires" required disabled>
                <label>Never Expires</label>
                <input type="checkbox" name="specialneverexpires" id="specialneverexpires" checked>
                <input type="submit" name="add_special" value="add special">
            </form>
        </fieldset> 
        <fieldset>
            <legend>Add Comment</legend>
            <form action="#" method="POST" novalidate>
                <label>comments</label>
                <input type="hidden" name="specialid" value="{{id}}">
                <input type="hidden" name="pubid" value="{{pubid}}">
                <input type="text" onkeyup="if(this.value.length>3){this.nextElementSibling.removeAttribute('disabled');}else{this.nextElementSibling.setAttribute('disabled', '');}" class="commentonspecial" name="commentonspecial" id="commentonspecial{{id}}" placeholder="comments disabled" disabled>
                <button onclick="this.form.submit()" name="addspecialcomment_button" id="addspecialcomment_button{{id}}" value="{{id}},{{pubid}}" disabled>
                    Add Comment <i class="fas fa-comments"></i>
                </button>
            </form>
        </fieldset>    
    </aside>
    <div class="alert">
        <aside class="close_icon">&#10060;</aside>
        <figcaption>ERROR:</figcaption>
        <div id="error">Error: this is an error</div>
    </div>
    
    <div class="alert">
        <aside class="close_icon">&#10060;</aside>
        <figcaption>MESSAGE:</figcaption>
        <div id="message">Message: this is an message</div>
    </div>
        
    <div class="alert">
        <aside class="close_icon">&#10060;</aside>
        <figcaption>ALERT:</figcaption>
        <div id="notice">Notice: this is an Notice</div>
    </div>
    <img id="fbid" src="https://graph.facebook.com/10155400463042202/picture?width=64&height=64">
</body>
<script id="template-pub" type="text/template">
    <aside>
        <header>
            <span>Views:{{views}}</span>
            <span>{{name}}</span>
            <span id="{{calc_score_id}}">Score:</span>
            
        </header>
        <p><a href="#">{{addr}}</a></p>
        <p>{{desc}}</p>
        <input type="checkbox" class="expand" id="arrow{{id}}">
        <label for="arrow{{id}}"></label>
        <section>
            <button onclick="FORMaddSpecial({{id}})" name="addspecial_button" class="addspecial_button" disabled>
                Add new Special for <b>{{name}}</b> <i class="fas fa-ticket-alt"></i>
            </button>
</script>
<script id="template-special" type="text/template">
            <div>
                <input onChange="AJAXThumbbing(this, {{id}}, 'UP')" type="checkbox" value="{{id}}" class="makefavourite" id="makefavourite{{id}}" disabled>
                <label for="makefavourite{{id}}"></label>
                <span id="allthumbsup{{id}}">{{up}}</span>
                <span>{{dow}}</span>
                <span id="allthumbsdown{{id}}">{{down}}</span>
                <input onChange="AJAXThumbbing(this, {{id}}, 'DOWN')" type="checkbox" class="unfavourite" id="unfavourite{{id}}" disabled>
                <label for="unfavourite{{id}}"></label>
            </div>
            <p>{{spec_title}}</p>
            <p>{{tod}}</p>
            <section>
                <button onclick="FORMAddComment({{id}},{{pubid}})" name="addspecialcomment_button" class="addspecialcomment_button" value="{{id}},{{pubid}}" disabled>
                    Add New Comment <i class="fas fa-comments"></i>
                </button>
</script>
<script id="template-special-comments" type="text/template">
    <p>{{msg}}</p>
</script>
<script id="template-special-footer" type="text/template">
    </section>
</script>
<script id="template-pub-footer" type="text/template">
        </section>
        <footer>
        </footer>
    </aside>
</script>
</html>